'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.db = void 0;

var _fs = require("fs");

var _path = require("path");

var _sequelize = _interopRequireDefault(require("sequelize"));

var _config = _interopRequireDefault(require("../config"));

var basename = (0, _path.basename)(__filename);
var db = {};
exports.db = db;
var sequelize = new _sequelize["default"](_config["default"].db.database, _config["default"].db.username, _config["default"].db.password, {
  host: _config["default"].db.host,
  port: _config["default"].db.port,
  dialect: _config["default"].db.connection,
  logging: false,
  pool: {
    max: 20,
    min: 1,
    idle: 20000,
    acquire: 1000000
  },
  timestamps: true
});
(0, _fs.readdirSync)(__dirname).filter(function (file) {
  return file.indexOf('.') !== 0 && file !== basename && file.slice(-3) === '.js';
}).forEach(function (file) {
  var model = require((0, _path.join)(__dirname, file))(sequelize, _sequelize["default"].DataTypes);

  db[model.name] = model;
});
Object.keys(db).forEach(function (modelName) {
  if (db[modelName].associate) {
    db[modelName].associate(db);
  }
});
db.sequelize = sequelize;
db.Sequelize = _sequelize["default"];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RlbHMvaW5kZXguanMiXSwibmFtZXMiOlsiYmFzZW5hbWUiLCJfX2ZpbGVuYW1lIiwiZGIiLCJzZXF1ZWxpemUiLCJTZXF1ZWxpemUiLCJjb25maWciLCJkYXRhYmFzZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJob3N0IiwicG9ydCIsImRpYWxlY3QiLCJjb25uZWN0aW9uIiwibG9nZ2luZyIsInBvb2wiLCJtYXgiLCJtaW4iLCJpZGxlIiwiYWNxdWlyZSIsInRpbWVzdGFtcHMiLCJfX2Rpcm5hbWUiLCJmaWx0ZXIiLCJmaWxlIiwiaW5kZXhPZiIsInNsaWNlIiwiZm9yRWFjaCIsIm1vZGVsIiwicmVxdWlyZSIsIkRhdGFUeXBlcyIsIm5hbWUiLCJPYmplY3QiLCJrZXlzIiwibW9kZWxOYW1lIiwiYXNzb2NpYXRlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0EsSUFBTUEsUUFBUSxHQUFHLG9CQUFVQyxVQUFWLENBQWpCO0FBQ0EsSUFBTUMsRUFBRSxHQUFHLEVBQVg7O0FBRUEsSUFBSUMsU0FBUyxHQUFHLElBQUlDLHFCQUFKLENBQWNDLG1CQUFPSCxFQUFQLENBQVVJLFFBQXhCLEVBQWtDRCxtQkFBT0gsRUFBUCxDQUFVSyxRQUE1QyxFQUFzREYsbUJBQU9ILEVBQVAsQ0FBVU0sUUFBaEUsRUFBMEU7QUFDeEZDLEVBQUFBLElBQUksRUFBRUosbUJBQU9ILEVBQVAsQ0FBVU8sSUFEd0U7QUFFeEZDLEVBQUFBLElBQUksRUFBRUwsbUJBQU9ILEVBQVAsQ0FBVVEsSUFGd0U7QUFHeEZDLEVBQUFBLE9BQU8sRUFBRU4sbUJBQU9ILEVBQVAsQ0FBVVUsVUFIcUU7QUFJeEZDLEVBQUFBLE9BQU8sRUFBRSxLQUorRTtBQUt4RkMsRUFBQUEsSUFBSSxFQUFFO0FBQ0pDLElBQUFBLEdBQUcsRUFBRSxFQUREO0FBRUpDLElBQUFBLEdBQUcsRUFBRSxDQUZEO0FBR0pDLElBQUFBLElBQUksRUFBRSxLQUhGO0FBSUpDLElBQUFBLE9BQU8sRUFBRTtBQUpMLEdBTGtGO0FBV3hGQyxFQUFBQSxVQUFVLEVBQUU7QUFYNEUsQ0FBMUUsQ0FBaEI7QUFjQSxxQkFBWUMsU0FBWixFQUNHQyxNQURILENBQ1UsVUFBQUMsSUFBSSxFQUFJO0FBQ2QsU0FBUUEsSUFBSSxDQUFDQyxPQUFMLENBQWEsR0FBYixNQUFzQixDQUF2QixJQUE4QkQsSUFBSSxLQUFLdEIsUUFBdkMsSUFBcURzQixJQUFJLENBQUNFLEtBQUwsQ0FBVyxDQUFDLENBQVosTUFBbUIsS0FBL0U7QUFDRCxDQUhILEVBSUdDLE9BSkgsQ0FJVyxVQUFBSCxJQUFJLEVBQUk7QUFDZixNQUFNSSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxnQkFBS1AsU0FBTCxFQUFnQkUsSUFBaEIsQ0FBRCxDQUFQLENBQStCbkIsU0FBL0IsRUFBMENDLHNCQUFVd0IsU0FBcEQsQ0FBZDs7QUFDQTFCLEVBQUFBLEVBQUUsQ0FBQ3dCLEtBQUssQ0FBQ0csSUFBUCxDQUFGLEdBQWlCSCxLQUFqQjtBQUNELENBUEg7QUFTQUksTUFBTSxDQUFDQyxJQUFQLENBQVk3QixFQUFaLEVBQWdCdUIsT0FBaEIsQ0FBd0IsVUFBQU8sU0FBUyxFQUFJO0FBQ25DLE1BQUk5QixFQUFFLENBQUM4QixTQUFELENBQUYsQ0FBY0MsU0FBbEIsRUFBNkI7QUFDM0IvQixJQUFBQSxFQUFFLENBQUM4QixTQUFELENBQUYsQ0FBY0MsU0FBZCxDQUF3Qi9CLEVBQXhCO0FBQ0Q7QUFDRixDQUpEO0FBTUFBLEVBQUUsQ0FBQ0MsU0FBSCxHQUFlQSxTQUFmO0FBQ0FELEVBQUUsQ0FBQ0UsU0FBSCxHQUFlQSxxQkFBZiIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgcmVhZGRpclN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBiYXNlbmFtZSBhcyBfYmFzZW5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcbmNvbnN0IGJhc2VuYW1lID0gX2Jhc2VuYW1lKF9fZmlsZW5hbWUpO1xuY29uc3QgZGIgPSB7fTtcblxubGV0IHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRiLmRhdGFiYXNlLCBjb25maWcuZGIudXNlcm5hbWUsIGNvbmZpZy5kYi5wYXNzd29yZCwge1xuICBob3N0OiBjb25maWcuZGIuaG9zdCxcbiAgcG9ydDogY29uZmlnLmRiLnBvcnQsXG4gIGRpYWxlY3Q6IGNvbmZpZy5kYi5jb25uZWN0aW9uLFxuICBsb2dnaW5nOiBmYWxzZSxcbiAgcG9vbDoge1xuICAgIG1heDogMjAsXG4gICAgbWluOiAxLFxuICAgIGlkbGU6IDIwMDAwLFxuICAgIGFjcXVpcmU6IDEwMDAwMDBcbiAgfSxcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbnJlYWRkaXJTeW5jKF9fZGlybmFtZSlcbiAgLmZpbHRlcihmaWxlID0+IHtcbiAgICByZXR1cm4gKGZpbGUuaW5kZXhPZignLicpICE9PSAwKSAmJiAoZmlsZSAhPT0gYmFzZW5hbWUpICYmIChmaWxlLnNsaWNlKC0zKSA9PT0gJy5qcycpO1xuICB9KVxuICAuZm9yRWFjaChmaWxlID0+IHtcbiAgICBjb25zdCBtb2RlbCA9IHJlcXVpcmUoam9pbihfX2Rpcm5hbWUsIGZpbGUpKShzZXF1ZWxpemUsIFNlcXVlbGl6ZS5EYXRhVHlwZXMpO1xuICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gIH0pO1xuXG5PYmplY3Qua2V5cyhkYikuZm9yRWFjaChtb2RlbE5hbWUgPT4ge1xuICBpZiAoZGJbbW9kZWxOYW1lXS5hc3NvY2lhdGUpIHtcbiAgICBkYlttb2RlbE5hbWVdLmFzc29jaWF0ZShkYik7XG4gIH1cbn0pO1xuXG5kYi5zZXF1ZWxpemUgPSBzZXF1ZWxpemU7XG5kYi5TZXF1ZWxpemUgPSBTZXF1ZWxpemU7XG5cbmV4cG9ydCB7IGRiIH07Il19